<!DOCTYPE html>
<html>
<head>
  <title>自动导航到重庆解放碑示例</title>
  <meta charset="utf-8">
  <style>
    #map {
      width: 100%;
      height: 600px;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script type="text/javascript">
    function loadMapScript() {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src = "https://api.map.baidu.com/api?v=3.0&ak=TptQiGIGQx9jnMaQgo8wiurWaxuTpCEX";
      document.head.appendChild(script);
      script.onload = function () {
        initializeMap();
      };
    }

    function initializeMap() {
      var map = new BMap.Map("map");

      // 获取用户位置
      navigator.geolocation.getCurrentPosition(function(position) {
        var userLocation = new BMap.Point(position.coords.longitude, position.coords.latitude);

        // 添加导航控件
        var navigationControl = new BMap.NavigationControl({
          anchor: BMAP_ANCHOR_TOP_LEFT,
          type: BMAP_NAVIGATION_CONTROL_LARGE
        });
        map.addControl(navigationControl);

        // 设置地图中心为用户位置
        map.centerAndZoom(userLocation, 13);

        // 添加标记
        var userMarker = new BMap.Marker(userLocation);
        map.addOverlay(userMarker);

        // 添加路线规划
        var destination = "重庆解放碑";
        var walking = new BMap.WalkingRoute(map, {
          renderOptions: {
            map: map,
            autoViewport: true
          }
        });

        // 开始步行导航
        walking.search(userLocation, destination);
      });
    }

    // 在页面加载完成后异步加载地图 API
    window.onload = loadMapScript;
  </script>
</body>
</html>
